# 📘 คู่มือการทดสอบระบบ GCMS Clinic ก่อนใช้งานจริง

## 🚀 วิธีเริ่มต้นทดสอบ

### 1. เตรียมระบบ Laragon
```bash
1. เปิด Laragon
2. คลิก Start All
3. รอให้ Apache และ MySQL ทำงาน (ไฟเขียวทั้งคู่)
```

### 2. เข้าระบบผ่าน Browser
```
URL: http://cg.test หรือ http://localhost/new/clinic
Username: admin
Password: [ตั้งค่าในระบบ]
```

---

## ✅ การทดสอบทีละส่วน (Step-by-Step)

### 📌 Module 1: ระบบ Login และ Permission

#### Test 1.1 - ทดสอบ Login
1. เปิด http://cg.test
2. ลอง login ด้วย:
   - ✅ Username/Password ถูกต้อง → ต้องเข้าได้
   - ❌ Username ผิด → ต้องแจ้ง error
   - ❌ Password ผิด → ต้องแจ้ง error
3. ทดสอบ Logout → ต้องออกจากระบบได้

#### Test 1.2 - ทดสอบ Roles
1. Login เป็น Super Admin (username: admin)
   - ✅ ต้องเห็นเมนูทั้งหมด
   - ✅ ต้องเลือก branch ได้
   - ✅ ต้องเห็นข้อมูลทุก branch

2. Login เป็น Staff ธรรมดา
   - ✅ เห็นเฉพาะเมนูที่มีสิทธิ์
   - ✅ เห็นเฉพาะข้อมูล branch ตัวเอง

---

### 📌 Module 2: จัดการข้อมูลผู้ป่วย (Patient)

#### Test 2.1 - เพิ่มผู้ป่วยใหม่
1. ไปที่เมนู **ผู้ป่วย > เพิ่มผู้ป่วยใหม่**
2. กรอกข้อมูล:
   ```
   ชื่อ-นามสกุล: ทดสอบ ระบบ
   เบอร์โทร: 0812345678
   วันเกิด: 01/01/1990
   ```
3. คลิกบันทึก
4. ✅ ต้องได้ HN อัตโนมัติ
5. ✅ ข้อมูลต้องบันทึกสำเร็จ

#### Test 2.2 - ค้นหาผู้ป่วย
1. ไปที่เมนู **ผู้ป่วย > รายชื่อผู้ป่วย**
2. ทดสอบค้นหา:
   - ค้นด้วย HN
   - ค้นด้วยชื่อ
   - ค้นด้วยเบอร์โทร
3. ✅ ต้องเจอผู้ป่วยที่ค้นหา

#### Test 2.3 - แก้ไข/ลบผู้ป่วย
1. คลิกแก้ไขผู้ป่วย
2. เปลี่ยนเบอร์โทร
3. บันทึก
4. ✅ ข้อมูลต้องอัพเดท

---

### 📌 Module 3: นัดหมาย (Appointment)

#### Test 3.1 - สร้างนัดหมาย
1. ไปที่เมนู **นัดหมาย > เพิ่มนัดหมาย**
2. เลือก:
   - ผู้ป่วย: เลือกจากรายชื่อ
   - วันที่: พรุ่งนี้
   - เวลา: 10:00
   - บริการ: เลือกบริการ
3. บันทึก
4. ✅ นัดหมายต้องแสดงในปฏิทิน

#### Test 3.2 - จัดการคิว (Queue)
1. ไปที่เมนู **คิว > จัดการคิว**
2. เลือกวันนี้
3. ทดสอบ:
   - เพิ่มคิว Walk-in
   - เรียกคิว
   - เริ่มการรักษา
   - จบการรักษา
4. ✅ สถานะต้องเปลี่ยนถูกต้อง

#### Test 3.3 - หน้าจอแสดงคิว (TV)
1. เปิด http://cg.test/queue/display
2. ✅ ต้องไม่ต้อง login
3. ✅ คิวต้อง refresh อัตโนมัติ
4. ✅ แสดงผลถูกต้องบนจอใหญ่

---

### 📌 Module 4: ระบบเก็บเงิน (Billing)

#### Test 4.1 - สร้าง Invoice
1. ไปที่เมนู **การเงิน > สร้างใบแจ้งหนี้**
2. เลือกผู้ป่วย
3. เพิ่มรายการ:
   - บริการ A: 500 บาท
   - บริการ B: 300 บาท
4. ✅ รวมต้องเป็น 800 บาท
5. บันทึก

#### Test 4.2 - รับชำระเงิน
1. เลือก Invoice ที่สร้าง
2. คลิก **รับชำระ**
3. เลือกวิธีจ่าย: เงินสด
4. ใส่จำนวน: 1000 บาท
5. ✅ ต้องแสดงเงินทอน 200 บาท
6. ยืนยันการชำระ
7. ✅ สถานะต้องเป็น "ชำระแล้ว"

#### Test 4.3 - พิมพ์ใบเสร็จ
1. คลิกปุ่ม **พิมพ์ใบเสร็จ**
2. ✅ ใบเสร็จต้องแสดงข้อมูลถูกต้อง
3. ✅ มีเลขที่ใบเสร็จ

---

### 📌 Module 5: คอร์สการรักษา (Course Package)

#### Test 5.1 - สร้างคอร์ส
1. ไปที่เมนู **คอร์ส > จัดการคอร์ส**
2. สร้างคอร์สใหม่:
   ```
   ชื่อคอร์ส: นวดผ่อนคลาย 10 ครั้ง
   จำนวนครั้ง: 10
   ราคา: 3000 บาท
   ระยะเวลา: 90 วัน
   ```
3. บันทึก

#### Test 5.2 - ขายคอร์ส
1. ไปที่เมนู **คอร์ส > ขายคอร์ส**
2. เลือกผู้ป่วย
3. เลือกคอร์ส
4. รับชำระเงิน
5. ✅ คอร์สต้องแสดงในประวัติผู้ป่วย

#### Test 5.3 - ใช้คอร์ส
1. เมื่อผู้ป่วยมารักษา
2. เลือก **ใช้คอร์ส**
3. ✅ จำนวนครั้งคงเหลือต้องลดลง
4. ✅ ต้องแสดงประวัติการใช้

---

### 📌 Module 6: Commission & ค่าตอบแทน

#### Test 6.1 - ตั้งค่า Commission
1. ไปที่เมนู **ตั้งค่า > Commission Rate**
2. ตั้งค่า:
   - นวด: 30%
   - ทำหน้า: 25%
3. บันทึก

#### Test 6.2 - คำนวณ Commission
1. สร้าง Invoice พร้อมระบุ PT/แพทย์
2. รับชำระเงิน
3. ไปที่ **รายงาน > Commission**
4. ✅ Commission ต้องคำนวณถูกต้อง

---

### 📌 Module 7: Social CRM (Facebook)

#### Test 7.1 - รับข้อความจาก Facebook
1. ไปที่เมนู **CRM > Chat**
2. ✅ ต้องเห็นข้อความจาก Facebook
3. ทดสอบตอบกลับ
4. ✅ ข้อความต้องส่งไปที่ Facebook

#### Test 7.2 - Lead Tracking
1. ดู Lead Status
2. ✅ ต้องแสดงสถานะ: New → Contacted → Booked
3. ทดสอบสร้างนัดจาก Chat

---

### 📌 Module 8: รายงาน (Reports)

#### Test 8.1 - Dashboard
1. ไปที่ **Dashboard**
2. ✅ ต้องแสดง:
   - รายได้วันนี้
   - จำนวนนัดวันนี้
   - จำนวนผู้ป่วยใหม่
   - กราฟรายได้

#### Test 8.2 - รายงานรายได้
1. ไปที่ **รายงาน > รายได้**
2. เลือกช่วงเวลา
3. ✅ ต้องแสดงยอดถูกต้อง
4. ทดสอบ Export Excel

---

## 🔧 การทดสอบด้วย Script อัตโนมัติ

### วิธีรัน Automated Test:
1. เปิด Command Prompt
2. cd ไปที่ `C:\laragon\www\new\clinic`
3. รันคำสั่ง: `run_tests.bat`
4. รอดูผลการทดสอบ

---

## ⚠️ ปัญหาที่พบบ่อยและวิธีแก้

### 1. Login ไม่ได้
- ตรวจสอบ username/password
- Clear cookies และ cache
- ตรวจสอบว่า MySQL ทำงานอยู่

### 2. หน้าขาว/Error 500
- ดู error log ที่ `storage/logs/laravel.log`
- รัน `php artisan config:clear`
- ตรวจสอบ permission ของ folder storage

### 3. ข้อมูลไม่บันทึก
- ตรวจสอบ database connection
- ดูว่ามี validation error หรือไม่
- ตรวจสอบ permissions ของ user

---

## 📝 บันทึกผลการทดสอบ

### ตาราง Check List
| Module | ทดสอบแล้ว | ผ่าน | ไม่ผ่าน | หมายเหตุ |
|--------|-----------|------|---------|----------|
| Login System | ☐ | ☐ | ☐ | |
| Patient Management | ☐ | ☐ | ☐ | |
| Appointments | ☐ | ☐ | ☐ | |
| Queue System | ☐ | ☐ | ☐ | |
| Billing | ☐ | ☐ | ☐ | |
| Course Package | ☐ | ☐ | ☐ | |
| Commission | ☐ | ☐ | ☐ | |
| Social CRM | ☐ | ☐ | ☐ | |
| Reports | ☐ | ☐ | ☐ | |
| Multi-branch | ☐ | ☐ | ☐ | |

---

## ✅ Checklist ก่อนขึ้น Production

### สิ่งที่ต้องทำให้เสร็จ (CRITICAL):
- [ ] เปลี่ยน APP_ENV=production ใน .env
- [ ] เปลี่ยน APP_DEBUG=false ใน .env
- [ ] Generate APP_KEY ใหม่
- [ ] ตั้งค่า Database password
- [ ] ลบไฟล์ test_*.php ทั้งหมด
- [ ] ตั้งค่า SSL Certificate
- [ ] Backup database
- [ ] ตั้งรหัส admin ใหม่

### เอกสารที่ต้องเตรียม:
- [ ] คู่มือการใช้งานสำหรับ User
- [ ] คู่มือ Admin
- [ ] Contact Support
- [ ] Backup & Recovery Plan

---

## 📞 ติดต่อเมื่อพบปัญหา

**Developer:**
- Phone: _______________
- Email: _______________

**System Admin:**
- Phone: _______________
- Email: _______________

---

*อัพเดทล่าสุด: 2026-01-14*
*Version: 1.0*